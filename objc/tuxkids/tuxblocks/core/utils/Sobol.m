//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: C:\Users\Thomas\Documents\Eclipse\Tux\tuxblocks\core\src\main\java\tuxkids\tuxblocks\core\utils\Sobol.java
//
//  Created by Thomas on 7/1/13.
//

#import "IOSDoubleArray.h"
#import "IOSIntArray.h"
#import "IOSLongArray.h"
#import "IOSObjectArray.h"
#import "java/io/PrintStream.h"
#import "java/lang/Math.h"
#import "java/lang/System.h"
#import "tuxkids/tuxblocks/core/utils/Sobol.h"

@implementation TBSobol

static IOSObjectArray * TBSobol_pp_;

- (IOSObjectArray *)v {
  return v_;
}
- (void)setV:(IOSObjectArray *)v {
  JreOperatorRetainedAssign(&v_, self, v);
}
@synthesize v = v_;
- (IOSObjectArray *)p {
  return p_;
}
- (void)setP:(IOSObjectArray *)p {
  JreOperatorRetainedAssign(&p_, self, p);
}
@synthesize p = p_;
- (IOSIntArray *)g {
  return g_;
}
- (void)setG:(IOSIntArray *)g {
  JreOperatorRetainedAssign(&g_, self, g);
}
@synthesize g = g_;
- (IOSLongArray *)x_int {
  return x_int_;
}
- (void)setX_int:(IOSLongArray *)x_int {
  JreOperatorRetainedAssign(&x_int_, self, x_int);
}
@synthesize x_int = x_int_;

+ (int)bits {
  return TBSobol_bits;
}

+ (long long int)N {
  return TBSobol_N;
}

+ (IOSObjectArray *)pp {
  return TBSobol_pp_;
}

- (NSString *)getName {
  return @"Sobol Sequence";
}

+ (void)printbinWithInt:(int)n {
  if (n > 0) {
    [TBSobol printbinWithInt:n / 2];
    [((JavaIoPrintStream *) NIL_CHK([JavaLangSystem out])) printWithInt:n % 2];
  }
}

+ (int)grayWithInt:(int)n {
  return n ^ (n / 2);
}

- (void)read_prim_polWithInt:(int)d
                     withInt:(int)n
                     withInt:(int)k {
  [((IOSObjectArray *) NIL_CHK(p_)) replaceObjectAtIndex:k withObject:[[[IOSIntArray alloc] initWithLength:d + 1] autorelease]];
  int j = 0;
  [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(p_)) objectAtIndex:k]) replaceIntAtIndex:d withInt:1];
  while (n > 0) {
    j++;
    [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(p_)) objectAtIndex:k]) replaceIntAtIndex:d - j withInt:n % 2];
    n = n / 2;
  }
  [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(p_)) objectAtIndex:k]) replaceIntAtIndex:0 withInt:1];
}

- (id)initWithInt:(int)dim {
  if ((self = [super initWithInt:dim])) {
    if (dim > 300) {
      [((JavaIoPrintStream *) NIL_CHK([JavaLangSystem out])) printlnWithNSString:@"Sobol sequence only implemented for dimension at most 300.\nExiting."];
    }
    JreOperatorRetainedAssign(&g_, self, [[[IOSIntArray alloc] initWithLength:dim] autorelease]);
    JreOperatorRetainedAssign(&p_, self, [[[IOSObjectArray alloc] initWithLength:dim type:[IOSClass classWithClass:[IOSIntArray class]]] autorelease]);
    [((IOSIntArray *) NIL_CHK(g_)) replaceIntAtIndex:0 withInt:0];
    [((IOSObjectArray *) NIL_CHK(p_)) replaceObjectAtIndex:0 withObject:[[[IOSIntArray alloc] initWithLength:1] autorelease]];
    [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(p_)) objectAtIndex:0]) replaceIntAtIndex:0 withInt:1];
    int k = 1;
    for (int i = 0; i < (int) [((IOSObjectArray *) NIL_CHK(TBSobol_pp_)) count]; i++) for (int j = 0; j < (int) [((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(TBSobol_pp_)) objectAtIndex:i]) count]; j++) if (k < dim) {
      [((IOSIntArray *) NIL_CHK(g_)) replaceIntAtIndex:k withInt:i + 1];
      [self read_prim_polWithInt:[((IOSIntArray *) NIL_CHK(g_)) intAtIndex:k] withInt:[((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(TBSobol_pp_)) objectAtIndex:i]) intAtIndex:j] withInt:k];
      k++;
    }
    else break;
    JreOperatorRetainedAssign(&v_, self, [IOSObjectArray arrayWithObjects:(id[]){ [[IOSLongArray alloc] initWithLength:TBSobol_bits] } count:dim type:[IOSClass classWithClass:[IOSLongArray class]]]);
    for (int j = 0; j < TBSobol_bits; j++) [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:0]) replaceLongAtIndex:j withLong:(1LL << (TBSobol_bits - j - 1))];
    if (dim > 1) [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:1]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
    if (dim > 2) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:2]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:2]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
    }
    if (dim > 3) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:3]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:3]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:3]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
    }
    if (dim > 4) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:4]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:4]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:4]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
    }
    if (dim > 5) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:5]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:5]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:5]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:5]) replaceLongAtIndex:3 withLong:(1LL << TBSobol_bits - 4)];
    }
    if (dim > 6) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:6]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:6]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:6]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:6]) replaceLongAtIndex:3 withLong:(7LL << TBSobol_bits - 4)];
    }
    if (dim > 7) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:7]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:7]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:7]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:7]) replaceLongAtIndex:3 withLong:(9LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:7]) replaceLongAtIndex:4 withLong:(9LL << TBSobol_bits - 5)];
    }
    if (dim > 8) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:8]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:8]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:8]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:8]) replaceLongAtIndex:3 withLong:(7LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:8]) replaceLongAtIndex:4 withLong:(21LL << TBSobol_bits - 5)];
    }
    if (dim > 9) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:9]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:9]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:9]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:9]) replaceLongAtIndex:3 withLong:(11LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:9]) replaceLongAtIndex:4 withLong:(27LL << TBSobol_bits - 5)];
    }
    if (dim > 10) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:10]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:10]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:10]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:10]) replaceLongAtIndex:3 withLong:(3LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:10]) replaceLongAtIndex:4 withLong:(29LL << TBSobol_bits - 5)];
    }
    if (dim > 11) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:11]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:11]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:11]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:11]) replaceLongAtIndex:3 withLong:(13LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:11]) replaceLongAtIndex:4 withLong:(3LL << TBSobol_bits - 5)];
    }
    if (dim > 12) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:12]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:12]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:12]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:12]) replaceLongAtIndex:3 withLong:(1LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:12]) replaceLongAtIndex:4 withLong:(15LL << TBSobol_bits - 5)];
    }
    if (dim > 13) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:13]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:13]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:13]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:13]) replaceLongAtIndex:3 withLong:(9LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:13]) replaceLongAtIndex:4 withLong:(23LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:13]) replaceLongAtIndex:5 withLong:(37LL << TBSobol_bits - 6)];
    }
    if (dim > 14) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:14]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:14]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:14]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:14]) replaceLongAtIndex:3 withLong:(13LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:14]) replaceLongAtIndex:4 withLong:(11LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:14]) replaceLongAtIndex:5 withLong:(7LL << TBSobol_bits - 6)];
    }
    if (dim > 15) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:15]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:15]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:15]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:15]) replaceLongAtIndex:3 withLong:(5LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:15]) replaceLongAtIndex:4 withLong:(19LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:15]) replaceLongAtIndex:5 withLong:(33LL << TBSobol_bits - 6)];
    }
    if (dim > 16) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:16]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:16]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:16]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:16]) replaceLongAtIndex:3 withLong:(13LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:16]) replaceLongAtIndex:4 withLong:(25LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:16]) replaceLongAtIndex:5 withLong:(5LL << TBSobol_bits - 6)];
    }
    if (dim > 17) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:17]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:17]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:17]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:17]) replaceLongAtIndex:3 withLong:(13LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:17]) replaceLongAtIndex:4 withLong:(15LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:17]) replaceLongAtIndex:5 withLong:(39LL << TBSobol_bits - 6)];
    }
    if (dim > 18) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:18]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:18]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:18]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:18]) replaceLongAtIndex:3 withLong:(11LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:18]) replaceLongAtIndex:4 withLong:(7LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:18]) replaceLongAtIndex:5 withLong:(11LL << TBSobol_bits - 6)];
    }
    if (dim > 19) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:3 withLong:(7LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:4 withLong:(3LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:5 withLong:(23LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:19]) replaceLongAtIndex:6 withLong:(79LL << TBSobol_bits - 7)];
    }
    if (dim > 20) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:3 withLong:(15LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:4 withLong:(17LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:5 withLong:(63LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:20]) replaceLongAtIndex:6 withLong:(13LL << TBSobol_bits - 7)];
    }
    if (dim > 21) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:3 withLong:(3LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:4 withLong:(25LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:5 withLong:(17LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:21]) replaceLongAtIndex:6 withLong:(115LL << TBSobol_bits - 7)];
    }
    if (dim > 22) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:3 withLong:(9LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:4 withLong:(31LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:5 withLong:(29LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:22]) replaceLongAtIndex:6 withLong:(17LL << TBSobol_bits - 7)];
    }
    if (dim > 23) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:3 withLong:(15LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:4 withLong:(29LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:5 withLong:(15LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:23]) replaceLongAtIndex:6 withLong:(41LL << TBSobol_bits - 7)];
    }
    if (dim > 24) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:3 withLong:(9LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:4 withLong:(5LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:5 withLong:(21LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:24]) replaceLongAtIndex:6 withLong:(119LL << TBSobol_bits - 7)];
    }
    if (dim > 25) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:3 withLong:(5LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:4 withLong:(1LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:5 withLong:(27LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:25]) replaceLongAtIndex:6 withLong:(33LL << TBSobol_bits - 7)];
    }
    if (dim > 26) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:2 withLong:(3LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:3 withLong:(1LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:4 withLong:(23LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:5 withLong:(13LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:26]) replaceLongAtIndex:6 withLong:(75LL << TBSobol_bits - 7)];
    }
    if (dim > 27) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:3 withLong:(7LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:4 withLong:(19LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:5 withLong:(25LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:27]) replaceLongAtIndex:6 withLong:(105LL << TBSobol_bits - 7)];
    }
    if (dim > 28) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:3 withLong:(5LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:4 withLong:(21LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:5 withLong:(9LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:28]) replaceLongAtIndex:6 withLong:(7LL << TBSobol_bits - 7)];
    }
    if (dim > 29) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:2 withLong:(1LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:3 withLong:(15LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:4 withLong:(5LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:5 withLong:(49LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:29]) replaceLongAtIndex:6 withLong:(59LL << TBSobol_bits - 7)];
    }
    if (dim > 30) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:1 withLong:(3LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:2 withLong:(5LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:3 withLong:(15LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:4 withLong:(17LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:5 withLong:(19LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:30]) replaceLongAtIndex:6 withLong:(21LL << TBSobol_bits - 7)];
    }
    if (dim > 31) {
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:0 withLong:(1LL << TBSobol_bits - 1)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:1 withLong:(1LL << TBSobol_bits - 2)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:2 withLong:(7LL << TBSobol_bits - 3)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:3 withLong:(11LL << TBSobol_bits - 4)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:4 withLong:(13LL << TBSobol_bits - 5)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:5 withLong:(29LL << TBSobol_bits - 6)];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:31]) replaceLongAtIndex:6 withLong:(3LL << TBSobol_bits - 7)];
    }
    for (k = 32; k < dim; k++) {
      for (int l = 0; l < [((IOSIntArray *) NIL_CHK(g_)) intAtIndex:k]; l++) {
        double u = [JavaLangMath random];
        long long int f = (1LL << l + 1), n = (int) (f * u);
        while (n % 2 == 0) {
          u = [JavaLangMath random];
          n = (int) (f * u);
        }
        [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) replaceLongAtIndex:l withLong:(n << (TBSobol_bits - l - 1))];
      }
    }
    for (k = 1; k < dim; k++) for (int l = [((IOSIntArray *) NIL_CHK(g_)) intAtIndex:k]; l < TBSobol_bits; l++) {
      long long int n = ([((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) longAtIndex:l - [((IOSIntArray *) NIL_CHK(g_)) intAtIndex:k]] >> [((IOSIntArray *) NIL_CHK(g_)) intAtIndex:k]);
      for (int j = 1; j <= [((IOSIntArray *) NIL_CHK(g_)) intAtIndex:k]; j++) if ([((IOSIntArray *) [((IOSObjectArray *) NIL_CHK(p_)) objectAtIndex:k]) intAtIndex:j] != 0) n = n ^ [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) longAtIndex:l - j];
      [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) replaceLongAtIndex:l withLong:n];
    }
    index_ = 1;
    JreOperatorRetainedAssign(&x_int_, self, [[[IOSLongArray alloc] initWithLength:dim] autorelease]);
    for (k = 0; k < dim; k++) [((IOSLongArray *) NIL_CHK(x_int_)) replaceLongAtIndex:k withLong:[((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) longAtIndex:0]];
    JreOperatorRetainedAssign(&x_, self, [[[IOSDoubleArray alloc] initWithLength:dim] autorelease]);
    for (k = 0; k < dim; k++) [((IOSDoubleArray *) NIL_CHK(x_)) replaceDoubleAtIndex:k withDouble:((double) [((IOSLongArray *) NIL_CHK(x_int_)) longAtIndex:k]) / TBSobol_N];
  }
  return self;
}

- (void)restart {
  index_ = 1;
  for (int k = 0; k < dim_; k++) [((IOSLongArray *) NIL_CHK(x_int_)) replaceLongAtIndex:k withLong:[((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) longAtIndex:0]];
}

- (IOSDoubleArray *)nextPoint {
  int j = 0, n = index_;
  while (n % 2 == 1) {
    n = n >> 1;
    j++;
  }
  for (int k = 0; k < dim_; k++) {
    [((IOSLongArray *) NIL_CHK(x_int_)) replaceLongAtIndex:k withLong:[x_int_ longAtIndex:k] ^ [((IOSLongArray *) [((IOSObjectArray *) NIL_CHK(v_)) objectAtIndex:k]) longAtIndex:j]];
    [((IOSDoubleArray *) NIL_CHK(x_)) replaceDoubleAtIndex:k withDouble:((double) [((IOSLongArray *) NIL_CHK(x_int_)) longAtIndex:k]) / TBSobol_N];
  }
  index_++;
  return x_;
}

+ (void)initialize {
  if (self == [TBSobol class]) {
    JreOperatorRetainedAssign(&TBSobol_pp_, self, [IOSObjectArray arrayWithObjects:(id[]){ [IOSIntArray arrayWithInts:(int[]){ 0 } count:1], [IOSIntArray arrayWithInts:(int[]){ 1 } count:1], [IOSIntArray arrayWithInts:(int[]){ 1, 2 } count:2], [IOSIntArray arrayWithInts:(int[]){ 1, 4 } count:2], [IOSIntArray arrayWithInts:(int[]){ 2, 4, 7, 11, 13, 14 } count:6], [IOSIntArray arrayWithInts:(int[]){ 1, 13, 16, 19, 22, 25 } count:6], [IOSIntArray arrayWithInts:(int[]){ 1, 4, 7, 8, 14, 19, 21, 28, 31, 32, 37, 41, 42, 50, 55, 56, 59, 62 } count:18], [IOSIntArray arrayWithInts:(int[]){ 14, 21, 22, 38, 47, 49, 50, 52, 56, 67, 70, 84, 97, 103, 115, 122 } count:16], [IOSIntArray arrayWithInts:(int[]){ 8, 13, 16, 22, 25, 44, 47, 52, 55, 59, 62, 67, 74, 81, 82, 87, 91, 94, 103, 104, 109, 122, 124, 137, 138, 143, 145, 152, 157, 167, 173, 176, 181, 182, 185, 191, 194, 199, 218, 220, 227, 229, 230, 234, 236, 241, 244, 253 } count:48], [IOSIntArray arrayWithInts:(int[]){ 4, 13, 19, 22, 50, 55, 64, 69, 98, 107, 115, 121, 127, 134, 140, 145, 152, 158, 161, 171, 181, 194, 199, 203, 208, 227, 242, 251, 253, 265, 266, 274, 283, 289, 295, 301, 316, 319, 324, 346, 352, 361, 367, 382, 395, 398, 400, 412, 419, 422, 426, 428, 433, 446, 454, 457, 472, 493, 505, 508 } count:60], [IOSIntArray arrayWithInts:(int[]){ 2, 11, 21, 22, 35, 49, 50, 56, 61, 70, 74, 79, 84, 88, 103, 104, 112, 115, 117, 122, 134, 137, 146, 148, 157, 158, 162, 164, 168, 173, 185, 186, 191, 193, 199, 213, 214, 220, 227, 236, 242, 251, 256, 259, 265, 266, 276, 292, 304, 310, 316, 319, 322, 328, 334, 339, 341, 345, 346, 362, 367, 372, 375, 376, 381, 385, 388, 392, 409, 415, 416, 421, 428, 431, 434, 439, 446, 451, 453, 457, 458, 471, 475, 478, 484, 493, 494, 499, 502, 517, 518, 524, 527, 555, 560, 565, 569, 578, 580, 587, 589, 590, 601, 607, 611, 614, 617, 618, 625, 628, 635, 641, 647, 654, 659, 662, 672, 675, 682, 684, 689, 695, 696, 713, 719, 724, 733, 734, 740, 747, 749, 752, 755, 762, 770, 782, 784, 787, 789, 793, 796, 803, 805, 810, 815, 824, 829, 830, 832, 841, 847, 849, 861, 871, 878, 889, 892, 901, 908, 920, 923, 942, 949, 950, 954, 961, 968, 971, 973, 979, 982, 986, 998, 1001, 1010, 1012 } count:176], [IOSIntArray arrayWithInts:(int[]){ 41, 52, 61, 62, 76, 104, 117, 131, 143, 145, 157, 167, 171, 176, 181, 194, 217, 236 } count:18] } count:12 type:[IOSClass classWithClass:[IOSIntArray class]]]);
  }
}

- (void)dealloc {
  JreOperatorRetainedAssign(&x_int_, self, nil);
  JreOperatorRetainedAssign(&g_, self, nil);
  JreOperatorRetainedAssign(&p_, self, nil);
  JreOperatorRetainedAssign(&v_, self, nil);
  [super dealloc];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  TBSobol *typedCopy = (TBSobol *) copy;
  typedCopy.v = v_;
  typedCopy.p = p_;
  typedCopy.g = g_;
  typedCopy.x_int = x_int_;
}

@end
